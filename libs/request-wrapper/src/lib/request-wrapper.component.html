<ng-container *ngIf="request$ | async"></ng-container>

<nz-result *ngIf="error else contentTmp"
           nzStatus="error"
           nzTitle="Looks like something went wrong"
           [nzSubTitle]="error">
  <div nz-result-extra>
    <button nz-button nzType="primary"
            (click)="request$ = getUpdatedRequest(request$)"> Retry
    </button>
  </div>
</nz-result>

<ng-template #contentTmp>
  <nz-spin class="h-100" [nzSpinning]="isLoading" [nzDelay]="300">
    <div *ngIf="isFirstDataLoaded" class="h-100">
      <ng-content></ng-content>
    </div>
  </nz-spin>
</ng-template>
